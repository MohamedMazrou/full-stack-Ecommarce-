<!-- alert success for product-->
<div [ngClass]="{'scale-100':_AddToCartService.alertAddCart , 'top-28': _AddToCartService.alertAddCart}"
    class="p-4 left-1/2 flex gap-1 items-center -translate-x-1/2 top-0  mx-auto transtion duration-300  w-fit fixed  mb-4 z-50 scale-0  text-sm text-green-800 rounded-lg bg-green-50"
    role="alert">
    <span class="font-medium">added to cart</span>
    <svg class="w-6 h-6 text-green-700" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
        fill="currentColor" viewBox="0 0 24 24">
        <path fill-rule="evenodd"
            d="M15.03 9.684h3.965c.322 0 .64.08.925.232.286.153.532.374.717.645a2.109 2.109 0 0 1 .242 1.883l-2.36 7.201c-.288.814-.48 1.355-1.884 1.355-2.072 0-4.276-.677-6.157-1.256-.472-.145-.924-.284-1.348-.404h-.115V9.478a25.485 25.485 0 0 0 4.238-5.514 1.8 1.8 0 0 1 .901-.83 1.74 1.74 0 0 1 1.21-.048c.396.13.736.397.96.757.225.36.32.788.269 1.211l-1.562 4.63ZM4.177 10H7v8a2 2 0 1 1-4 0v-6.823C3 10.527 3.527 10 4.176 10Z"
            clip-rule="evenodd" />
    </svg>

</div>


<section class="mt-44 md:mt-28 p-3">
<div class="flex p-3 justify-start md:justify-center  gap-4 items-center">

    <span class="md:text-lg md:p-3 mt-2  font-bold md:block ">Price Range :</span>
    <ngx-slider   
     [(value)]="value"
      [(highValue)]="highValue"
       [options]="options" 
       (userChangeEnd)="filteredPro()">
    
    </ngx-slider>   
</div>
   



<div *ngIf="_IsLoadingService.isLoadingSkeleton" class="grid w-full gap-5 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-6 ">
    <!-- Skeleton Loader -->
    @for (loader of [].constructor(6); track $index) {
    <div class="max-w-sm bg-white border border-gray-200 rounded-lg shadow-sm p-5 animate-pulse">
        <div class="w-full h-48 bg-gray-300 rounded-lg mb-4"></div>
        <div class="h-4 bg-gray-300 rounded w-3/4 mb-3"></div>
        <div class="flex items-center gap-2 mb-4">
            <div class="h-4 w-4 bg-gray-300 rounded"></div>
            <div class="h-4 w-4 bg-gray-300 rounded"></div>
            <div class="h-4 w-4 bg-gray-300 rounded"></div>
            <div class="h-4 w-4 bg-gray-300 rounded"></div>
        </div>
        <div class="h-4 bg-gray-300 rounded w-1/2 mb-3"></div>
        <div class="h-10 bg-gray-300 rounded w-full"></div>
    </div>
    }
</div>



    <!-- Filter buttons -->
    <!--
  <div class="flex justify-evenly md:justify-center md:gap-3">
    @for (filterbar of arrFilterBar; track $index) {
      <button 
        class="p-1 text-sm md:text-lg bg-zinc-600 text-white rounded-md 
               focus:bg-zinc-950 hover:bg-zinc-950 duration-300 transition">
        {{ filterbar }}
      </button>
    }
  </div>
  -->

    <!-- Product grid -->
    <div *ngIf="!_IsLoadingService.isLoadingSkeleton;"  class="grid gap-5 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-6 mt-8">

        @for (product of filteredProducts | paginate: { itemsPerPage: itemsPerPage, currentPage: p }; track $index) {

        <div
            class="max-w-sm bg-white border border-gray-200 rounded-lg shadow-sm duration-300 transition hover:shadow-xl">

            <!-- Product image -->
            <img loading="lazy" [routerLink]="['/user/details', product.id]" class="p-8 cursor-pointer rounded-t-lg"
                [src]="product.image" alt="product image" />

            <div class="px-5 pb-5">

                <!-- Title -->
                <h5 class="text-xl font-semibold tracking-tight text-gray-900 ">
                    {{ product.title | ProTitelcut }}...
                </h5>

                <!-- Stars -->
                <div class="flex  items-center mt-2.5 mb-5">
                    <div class="flex items-center space-x-1 rtl:space-x-reverse">
                        <svg class="w-4 h-4 text-yellow-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                            fill="currentColor" viewBox="0 0 22 20">
                            <path
                                d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                        </svg>
                        <svg class="w-4 h-4 text-yellow-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                            fill="currentColor" viewBox="0 0 22 20">
                            <path
                                d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                        </svg>
                        <svg class="w-4 h-4 text-yellow-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                            fill="currentColor" viewBox="0 0 22 20">
                            <path
                                d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                        </svg>
                        <svg class="w-4 h-4 text-yellow-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg"
                            fill="currentColor" viewBox="0 0 22 20">
                            <path
                                d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z" />
                        </svg>

                    </div>
                    <span
                        class="bg-zinc-100 text-white-800 text-xs font-semibold px-2.5 py-0.5 rounded-sm ms-3">5.0</span>


                </div>

                <!-- Price -->
                <del [ngClass]="{ 'block': product.discount, 'hidden': !product.discount }" class="text-gray-500">
                    ${{ product.price }}
                </del>

                <div class="flex items-center gap-3 mt-2">

                    <span [ngClass]="{ 'hidden': !product.discount }"
                        class="bg-red-500 rounded-full p-1 text-white w-fit text-sm">
                        {{ product.discount }}%
                    </span>

                    <span [ngClass]="{ 'block': product.discount, 'hidden': !product.discount }"
                        class="text-lg text-green-800">
                        ${{ product.price * (1 - product.discount / 100) | number:'1.0-0' }}
                    </span>

                    <span [ngClass]="{ 'block': !product.discount, 'hidden': product.discount }"
                        class="text-lg text-green-800">
                        ${{ product.price }}
                    </span>


                    <!-- button add card -->
                    @if(!product.CardStatus){
                    <button (click)="_AddToCartService.addProductToCart(product)"
                        class="text-white transition duration-500 hover:bg-zinc-950  hover:ring-4 focus:outline-none hover:ring-zinc-950 font-medium rounded-lg text-sm px-5 py-2.5 text-center bg-zinc-600 ">Add
                        to cart</button>
                    }
                    <!-- go to card -->
                    @if(product.CardStatus){
                    <button [routerLink]="['/user/cart/']"
                        class="text-white   transition duration-500 bg-zinc-950  ring-4 focus:outline-none ring-zinc-950 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Go
                        to cart</button>

                    }

                </div>
            </div>
        </div>
        }

    </div>
</section>

<!-- Pagination bar -->
<div class="flex justify-center items-center mt-7">
    <pagination-controls (click)="TopScroll()" (pageChange)="p = $event">
    </pagination-controls>
</div>